@using Questionnaire.Core.Web.Helpers
@using RavenQuestionnaire.Core.Views.Group
@model CompleteGroupView
@foreach (var question in Model.Questions)
{

    using (Ajax.BeginForm("SaveSingleResult", "CompleteQuestionnaire", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = ((CompleteGroupView)ViewBag.CurrentGroup).GetClientId("div") }))
    {
        using (Html.BeginCollectionItem("questions", true, question.PublicKey))
        {
            Html.RenderPartial("~/Views/Question/_TakeRow.cshtml", question);
              
        }
        using (Html.BeginCollectionItem("settings", true, question.PublicKey))
        {
            @Html.Hidden("ParentGroupPublicKey", ((CompleteGroupView)ViewBag.CurrentGroup).PublicKey)
            @Html.Hidden("QuestionnaireKey", Model.QuestionnaireKey)
        }
    }
}
@foreach (var group in Model.Groups)
{
    Html.RenderPartial("~/Views/Group/_Screen.cshtml", group);
}
