@using Questionnaire.Core.Web.Helpers
@using RavenQuestionnaire.Core.Entities.SubEntities
@using RavenQuestionnaire.Core.Views.Answer
@using RavenQuestionnaire.Core.Views.CompleteQuestionnaire.Vertical
@using System.Web.Mvc.Html5
@model CompleteQuestionnaireViewV
@{
    ViewBag.AjaxOptions = new AjaxOptions()
                              {
                                  InsertionMode = InsertionMode.Replace,
                                  UpdateTargetId = Model.CurrentGroup.GetClientId("div"),
                                  OnComplete = "ReInitMobile('#" + Model.CurrentGroup.GetClientId("div") + "')"
                              };
    ViewBag.CurrentGroupPublicKey = Model.CurrentGroup.PublicKey;
    ViewBag.QuestionnaireId = Model.Id;
}

@Html.Partial("~/Views/Group/Mobile/_CompleteGroup.cshtml", Model.CurrentGroup)


@*@RenderSimpleGroup(Model.CurrentGroup)*@

@*@helper  RenderSimpleGroup(CompleteGroupViewV simpleGroup)
    {
    
        foreach (var question in simpleGroup.Questions)
        {
            using (Ajax.BeginFormHtml5("SaveSingleResultI", "CompleteQuestionnaire", new { type = "Html5" }, ViewBag.AjaxOptions as AjaxOptions))
            {
                using (Html.BeginCollectionItem("questions", true, question.PublicKey))
                {
                    Html.RenderPartial("~/Views/Question/_TakeRowHtml5.cshtml", question);
                }
                using (Html.BeginCollectionItem("settings", true, question.PublicKey))
                {
    @Html.Hidden("ParentGroupPublicKey", Model.CurrentGroup.PublicKey)
    @Html.Hidden("QuestionnaireId", Model.Id)
                }
            }
        }
        foreach (var @group in simpleGroup.Groups)
        {
    @RenderSimpleGroup(@group)
        }
}
*@