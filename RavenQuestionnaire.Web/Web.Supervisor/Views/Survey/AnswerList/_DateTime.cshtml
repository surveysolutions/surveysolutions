@using Questionnaire.Core.Web.Helpers

@model Main.Core.View.Question.CompleteQuestionView
@using (Html.BeginCollectionItem("Answers", true, Guid.NewGuid()))
{
    <fieldset>
        <legend>@Html.Raw(Model.Title)</legend>
        @{
    var settings = (IDictionary<string, object>)ViewBag.EnabledRadioBoxSettings;
    settings.Add("readonly","readonly");
    settings.Add("onchange", "$(this.form).submit();");
    settings.Add("class", "datepicker-" + Model.PublicKey);
    string dateValue = Model.Answer == null ? DateTime.Now.ToString("MM/dd/yyyy") : Model.Answer.ToString()==String.Empty?DateTime.Now.ToString("MM/dd/yyyy"): Model.Answer.ToString();
        }
        @Html.Hidden("Parent", Model.PublicKey)
        <div class="answer hide-date-box ">
            @Html.Hidden("Selected", true)
            @Html.TextBox("AnswerValue", dateValue, settings)
        </div>
        <script type="text/javascript">
          
            $(function() {
                $(".datepicker-@(Model.PublicKey)").datepicker({
                        format: 'mm/dd/yyyy'
                    }).on('hide', function(e) {
                        $(this.form).submit();
                    });


            });
            $('.datepicker-@(Model.PublicKey)').css('cursor', 'pointer');
        </script>
    </fieldset>
}