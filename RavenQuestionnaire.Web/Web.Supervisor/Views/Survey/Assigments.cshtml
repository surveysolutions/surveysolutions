@using Web.Supervisor.Models
@using Core.Supervisor.Views.Assignment
@model AssignmentView
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type = "text/javascript"> </script>
@{
    ViewBag.Title = "Surveys";
}
<script src="../../Scripts/sorter.js" type="text/javascript"></script>
<script src="../../Scripts/grid.js" type="text/javascript"></script>
<script type="text/javascript">
    var sortData = undefined;
    
    $(document).ready(function() {
        grid =  $("#questionnaireTable").grid({
                url: "@Url.Action("GroupTableData", "Survey")",
                pageSize: @Model.PageSize,
                userId: "@Model.UserId",
                id: "@Model.TemplateId"
            });
    });
        
    function HideForm(data) {
        var json = jQuery.parseJSON(data.responseText);
        $('#row-' + json.cqId).removeClass("showForm");

        if (json.userId != null && json.userName != null) {
            $('#link-' + json.cqId).replaceWith('<a id="link-' + json.cqId + '" href="/User/Statistics/' + json.userId + '">' + json.userName + '</a>');
        }
        else {
            $('#link-' + json.cqId).replaceWith('<a id="link-' + json.cqId + '" href="/User/Statistics/"></a>');
        }
    }
</script>
<h2>@(Model.SurveyTitle)'s assignments</h2>
<div id="questionnaireTable">
    @Html.Partial("_TableGroup", Model)
</div>

@Html.Action("Chart", new { templateId = Model.TemplateId })