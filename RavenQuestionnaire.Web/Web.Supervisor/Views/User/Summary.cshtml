@using Web.Supervisor.Models
@model Core.Supervisor.Views.Summary.SummaryView

<script>
    $(document).ready(function() {
        $("#questionnaireTable").tablesorter({
                order: "@Model.Order",
                send: function(data) {
                    $.ajax({
                            type: "POST",
                            url: "@Url.Action("_SummaryData", "User")",
                            data: JSON.stringify({ SortOrder: data, Pager: { Page: @Model.Page , PageSize: @Model.PageSize }}),
                            contentType: 'application/json, charset=utf-8',
                            statusCode: {
                                200: function(response) {
                                    $("#questionnaireTable tbody").html(response);
                                }
                            }
                        });
                }
            });
    });
</script>

<h2>Interviewers</h2>
<table id="questionnaireTable" class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th></th>
            @foreach (var item in Model.Summary.Items)
            {
                <td colspan="3" class="{sorter: false}">@item.Key.Title</td>
            }
        </tr>
        <tr>
            <th class="sorting" sorter='{"key":"User.Name"}'>Login</th>
            @foreach (var item in Model.Summary.Items)
            {
                <th class="sorting" sorter='{"key":"@(item.Key.TemplateId).Initial"}'>Initial</th>
                <th class="sorting" sorter='{"key":"@(item.Key.TemplateId).Redo"}'>Redo</th>
                <th class="sorting" sorter='{"key":"@(item.Key.TemplateId).Total"}'>Total</th>
            }
        </tr>
    </thead>
    <tbody>
        @Html.Partial("_SummaryTable", Model)
    </tbody>
</table>
<div class="pagination">
    @Html.QPager(Model.PageSize, Model.Page, Model.TotalCount, new { order = Model.Order })
</div>