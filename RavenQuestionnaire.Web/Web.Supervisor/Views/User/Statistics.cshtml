@using RavenQuestionnaire.Core.Views.Interviewer
@using Main.Core.Entities.SubEntities
@model InterviewerStatisticsView
@{
 
    ViewBag.Title = Model.Name + "'s assignment";
}
<script type="text/javascript">
         $(document).ready(function() {
             $('#questionnaireTable').tablesorter({
                     order: "@Model.Order",
                     send: function(data) {
                         $.ajax({
                                 type: "POST",
                                 url: "@Url.Action("UserStatistics", "User")",
                                 data: JSON.stringify({ SortOrder: data, Pager: { Page: @(Model.Page) , PageSize: @(Model.PageSize) }, UserId: '@(Model.Id)'  }),
                                 contentType: 'application/json, charset=utf-8',
                                 statusCode: {
                                     200: function(response) {
                                         $("#questionnaireTable tbody").html(response);
                                     }
                                 }
                             });
                     }
                 });
         });
</script>
<h2>@(Model.Name)'s assignment</h2>
<table id="questionnaireTable" class="table table-striped table-bordered table-condensed">
    <thead>
        <tr>
            <th class="sorting" sorter='{"key":"Title"}'>Survey</th>
            @foreach (var header in Model.Headers)
            {
                var nameSorting = header.Value == SurveyStatus.Error.Name ? "Error" : header.Value;
                <th class="sorting" sorter='{"key":"@nameSorting"}'>@header.Value</th>
            }
        </tr>
    </thead>
    <tbody>
        @Html.Partial("_UserStatistics", Model)
    </tbody>
</table>
