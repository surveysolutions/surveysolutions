
@using Questionnaire.Core.Web.Helpers
@using RavenQuestionnaire.Core.Views.Statistics
@model RavenQuestionnaire.Core.Views.Statistics.CompleteQuestionnaireStatisticView
<div data-role="page" id="ref-link-answered" class="page">
    <div data-role="header" data-theme="b" class="ui-bar">
       
           
        <a class="nav-link ui-btn-left" href="@Url.Action("CompleteSummary", new { Id = Model.CompleteQuestionnaireId})" data-corners = "false" data-theme = "b" data-icon = "arrow-l" iconpos = "notext">
            Back</a>
            <h1>
        @Model.Title
            @foreach (var featured in @Model.FeaturedQuestions)
            {
          
                @featured.AnswerText
            }</h1>
    </div>
    <div data-role="content" data-iscroll="">
        <div id="scroller">
            <h1>
                Unanswered questions</h1>
            <ul data-role="listview" data-theme="c">
                <li data-role="list-divider" data-theme="b">
                    <div class="ui-grid-a">
                        <div class="ui-block-a">
                            Question</div>
                       
                    </div>
                </li>
                @foreach (QuestionStatisticView question in Model.UnansweredQuestions)
                {
                    <li>
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                @if (!question.GroupPropagationPublicKey.HasValue)
                                {
                                    <a href="@Url.Action("Screen", "Survey", new { id = Model.CompleteQuestionnaireId, group = question.GroupPublicKey, question = question.PublicKey })">@Html.Raw(question.QuestionText)</a>
                                }
                                else
                                {
                                    <a href="@Url.Action("Screen", "Survey", new { id = Model.CompleteQuestionnaireId, group = question.GroupPublicKey, question = question.PublicKey, propagationKey = question.GroupPropagationPublicKey })">@Html.Raw(question.QuestionText)</a>
                                }
                            </div>
                           
                        </div>
                    </li>
                }
            </ul>
        </div>
    </div>
</div>
