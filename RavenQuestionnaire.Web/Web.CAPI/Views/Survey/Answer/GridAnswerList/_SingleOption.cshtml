@using Main.Core.View.Answer
@using Questionnaire.Core.Web.Helpers
@model Core.CAPI.Views.PropagatedGroupViews.QuestionItemView.ColumnItems.QuestionColumnItem
@{

    var settings = new Dictionary<string, object>();
    settings.Add("onclick", "$(this.form).submit();");
}
<a href="#grid-popup-@(Model.ItemPublicKey)" data-inline="true" data-rel="popup">@(Model.Answer ?? "Set Answer")</a>
@using (Html.BeginCollectionItem("Answers", true, Model.ItemPublicKey))
{
    @Html.Hidden("Parent", Model.ItemPublicKey)
   
    
    
    
    <div data-role="popup" id="grid-popup-@(Model.ItemPublicKey)">
        <fieldset data-role="controlgroup">
            @foreach (CompleteAnswerView item in Model.Answers)
            {
                @Html.Hidden("Selected", true)

           string radibutonname = string.Format("{0}-{1}", ViewData.TemplateInfo.GetFullHtmlFieldId("PublicKey"), item.PublicKey);
           settings["id"] = radibutonname;

                @Html.RadioButton("PublicKey", item.PublicKey, item.Selected, settings)
                <label for="@radibutonname">
                    @{ Html.RenderPartial(string.Format("~/Views/Survey/Answer/Answer/_{0}.cshtml", item.AnswerType), item); }
                </label>
            }
        </fieldset>
    </div>
}