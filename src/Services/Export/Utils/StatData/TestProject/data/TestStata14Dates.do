
// do not edit this file with Notepad.exe

clear all
use "TestStataDates.dta", clear

assert c(N)==5
assert c(k)==4

// check variable names
quietly ds
assert r(varlist)=="TestDate OrgDate TestTime OrgTime"

// check variable types
// confirm long variable TestDate
confirm str10 variable TestDate
confirm str10 variable OrgDate
//confirm double variable TestTime
confirm str20 variable TestTime
confirm str20 variable OrgTime

// check some content
assert OrgDate[1]=="2017-09-14"
assert OrgTime[2]=="2000-01-01T01:02:03Z"

/* THIS PORTION OF THE TEST ACTUALLY MAKES SENSE ONLY IF DATE/DATETIME TYPES WERE USED DURING EXPORT

generate stdate=date(OrgDate,"YMD")
assert stdate==TestDate if !missing(stdate)
assert stdate==TestDate if !missing(TestDate)

generate tmp_time=subinstr(subinstr(OrgTime,"T"," ",.),"Z","",.)

generate double sttime=clock(tmp_time,"YMDhms")
format sttime %21.0g

assert sttime==TestTime if !missing(sttime)
assert sttime==TestTime if !missing(TestTime)

*/

// test is now completed successfully, create the marker
display filewrite("MarkerDates.txt","ok")

exit, STATA clear
