extern alias designer;

using Machine.Specifications;
using System.Collections.Generic;
using Ncqrs.Eventing.Storage;
using WB.Core.GenericSubdomains.Portable.Implementation;
using WB.Core.BoundedContexts.Designer.Implementation.Services;
using WB.UI.Designer.Providers.CQRS.Accounts.Events;
using WB.Core.GenericSubdomains.Portable.Services;
using WB.Core.GenericSubdomains.Portable;

using TemplateImported = designer::Main.Core.Events.Questionnaire.TemplateImported;
using System;
using System.Text;

namespace WB.Tests.Unit.GenericSubdomains.Utils.NewtonJsonUtilsTests
{
    internal class when_deserializing_designer_historical_events : NewtonJsonUtilsTestContext
    {
        Establish context = () =>
        {
            eventTypeResolver = new EventTypeResolver();
            eventTypeResolver.RegisterEventDataType(typeof(AccountRegistered));
            eventTypeResolver.RegisterEventDataType(typeof(TemplateImported));

            
            data.Add(new Tuple<string,string>(
                "accountRegistered",
                "T\0\0\0\u0002applicationName\0\u0004\0\0\0App\0\u0002email\0\u000e\0\0\0test@test.com\0\u0002confirmationToken\0\u0006\0\0\0token\0\0"
            ));

            /*data.Add(new Tuple<string, string>(
                "templateImported",

                "\u0006\u001f\u0000\u0000\u0003questionnaireDocument\u0000 \u001e\u0000\u0000\u0002id\u0000!\u0000\u0000\u000075a05d5a96cf447b9d31af46639b06b0\u0000\u0004children\u0000g\u001d\u0000\u0000\u00030\u0000 \u0001\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000 \u0000\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004  0 \t8 K  ZD$  \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\u0002stataExportCaption\u0000\u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 \u001f  Υ>  A\u0000 \u0012 \u0010u\u0002title\u0000\n\u0000\u0000\u0000test copy\u0000\u0000\u00031\u0000 \u0001\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000 \u0000\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004a  r   L \u0004x5dy0e\u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\u0002stataExportCaption\u0000\u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004  \u00068\u001dg vIr۩   \u0002title\u0000\n\u0000\u0000\u0000test copy\u0000\u0000\u00032\u0000 \u0001\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000 \u0000\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 G  YW<F 6 \u001b9*9 \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\u0002stataExportCaption\u0000\u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 Ȏ A \u001bU-r f T\u0003 \u0002title\u0000\n\u0000\u0000\u0000test copy\u0000\u0000\u00033\u0000X\u0018\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000p\u0017\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004   ~\u0007\u0011 {\u0012 u>Y \u0017\t\u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00031\u0000 \u0000\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004\u000f   < YU \u0017ҿղ\u0013\u0002title\u0000\u0010\u0000\u0000\u0000New sub-section\u0000\u0000\u00032\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004\u0007܏   H q 쨿qi \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00033\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004D   \u0015 C \u0011; Đ w \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00034\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004M  |nS}\u00126  \"  @ \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00035\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 p\u0012   \u0010  ރ9<\"F \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00036\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 I [W   l I     \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00037\u0000 \u0000\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 Y\u0006$!4 f  p6Y g\u0002title\u0000\u0010\u0000\u0000\u0000New sub-section\u0000\u0000\u00038\u0000{\u0005\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000B\u0004\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004)b  %    DR  0\u0005\u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00031\u0000~\u0003\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000 \u0002\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u00005\u0000\u0000\u0000Main.Core.Entities.SubEntities.StaticText, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 \n\u001c   gD \fM  \u001a \u0002text\u0000\u0010\u0000\u0000\u0000New static text\u0000\u0000\u00031\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004u x  \u0005 1a  > xo \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\bisFilteredCombobox\u0000\u0000\u0000\u00032\u0000>\u0001\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\bisRoster\u0000\u0001\u0002rosterSizeSource\u0000\f\u0000\u0000\u0000FixedTitles\u0000\u0004rosterFixedTitles\u0000\u0012\u0000\u0000\u0000\u00020\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0004fixedRosterTitles\u0000\u001e\u0000\u0000\u0000\u00030\u0000\u0016\u0000\u0000\u0000\u0002title\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004`D  \u0012ɋdm\u000b cꉁ3\u0002title\u0000\u000b\u0000\u0000\u0000New roster\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004\u0006h A h ~     \t \u0002title\u0000\u0010\u0000\u0000\u0000New sub-section\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\bisRoster\u0000\u0001\u0002rosterSizeSource\u0000\f\u0000\u0000\u0000FixedTitles\u0000\u0004rosterFixedTitles\u0000\u0012\u0000\u0000\u0000\u00020\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0004fixedRosterTitles\u0000\u001e\u0000\u0000\u0000\u00030\u0000\u0016\u0000\u0000\u0000\u0002title\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004  8ݢ䑭y4|\u0018\u0003  T\u0002title\u0000\u000b\u0000\u0000\u0000New roster\u0000\u0000\u00039\u0000 \u0005\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000J\u0004\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u00047b  j 'I x^ y Z \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\u0002stataExportCaption\u0000\u0001\u0000\u0000\u0000\u0000\u0000\u00031\u0000 \u0003\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000 \u0002\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u00005\u0000\u0000\u0000Main.Core.Entities.SubEntities.StaticText, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004     \u001f\u001dF S  a   \u0002text\u0000\u0010\u0000\u0000\u0000New static text\u0000\u0000\u00031\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004r \u001f̡+ N \u000e   3n \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\u0002stataExportCaption\u0000\u0001\u0000\u0000\u0000\u0000\u0000\u00032\u0000>\u0001\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\bisRoster\u0000\u0001\u0002rosterSizeSource\u0000\f\u0000\u0000\u0000FixedTitles\u0000\u0004rosterFixedTitles\u0000\u0012\u0000\u0000\u0000\u00020\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0004fixedRosterTitles\u0000\u001e\u0000\u0000\u0000\u00030\u0000\u0016\u0000\u0000\u0000\u0002title\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 < +*  I   V\t m\u0003\u0002title\u0000\u000b\u0000\u0000\u0000New roster\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004+\u001f \u001f  @ ,\u0004Ɠ   \u0002title\u0000\u0010\u0000\u0000\u0000New sub-section\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\bisRoster\u0000\u0001\u0002rosterSizeSource\u0000\f\u0000\u0000\u0000FixedTitles\u0000\u0004rosterFixedTitles\u0000\u0012\u0000\u0000\u0000\u00020\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0004fixedRosterTitles\u0000\u001e\u0000\u0000\u0000\u00030\u0000\u0016\u0000\u0000\u0000\u0002title\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 \b *!Ș\u0006 _,    u\u0002title\u0000\u000b\u0000\u0000\u0000New roster\u0000\u0000\u000310\u0000 \u0005\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000J\u0004\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 5 ?V  B  k\\ʴ  \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\u0002stataExportCaption\u0000\u0001\u0000\u0000\u0000\u0000\u0000\u00031\u0000 \u0003\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000 \u0002\u0000\u0000\u00030\u0000 \u0000\u0000\u0000\u0002$type\u00005\u0000\u0000\u0000Main.Core.Entities.SubEntities.StaticText, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004ĵ  J  N   \u001bǛ )\u0002text\u0000\u0010\u0000\u0000\u0000New static text\u0000\u0000\u00031\u0000 \u0000\u0000\u0000\u0002$type\u0000@\u0000\u0000\u0000Main.Core.Entities.SubEntities.Question.TextQuestion, Main.Core\u0000\u0004answers\u0000\u0005\u0000\u0000\u0000\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004$\u0016  N  F  \u001bN!s\b \u0002questionType\u0000\u0005\u0000\u0000\u0000Text\u0000\u0002stataExportCaption\u0000\u0001\u0000\u0000\u0000\u0000\u0000\u00032\u0000>\u0001\u0000\u0000\u0002$type\u00000\u0000\u0000\u0000Main.Core.Entities.SubEntities.Group, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\bisRoster\u0000\u0001\u0002rosterSizeSource\u0000\f\u0000\u0000\u0000FixedTitles\u0000\u0004rosterFixedTitles\u0000\u0012\u0000\u0000\u0000\u00020\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0004fixedRosterTitles\u0000\u001e\u0000\u0000\u0000\u00030\u0000\u0016\u0000\u0000\u0000\u0002title\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 \r Q K    J62\u0002title\u0000\u000b\u0000\u0000\u0000New roster\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 \u0010CB 7eM        \u0002title\u0000\u0010\u0000\u0000\u0000New sub-section\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\bisRoster\u0000\u0001\u0002rosterSizeSource\u0000\f\u0000\u0000\u0000FixedTitles\u0000\u0004rosterFixedTitles\u0000\u0012\u0000\u0000\u0000\u00020\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0004fixedRosterTitles\u0000\u001e\u0000\u0000\u0000\u00030\u0000\u0016\u0000\u0000\u0000\u0002title\u0000\u0006\u0000\u0000\u0000Title\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 'p   c   J n`  \u0002title\u0000\u000b\u0000\u0000\u0000New roster\u0000\u0000\u000311\u0000 \u0000\u0000\u0000\u0002$type\u00005\u0000\u0000\u0000Main.Core.Entities.SubEntities.StaticText, Main.Core\u0000\u0004children\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004 \u0013\u0019 o-/ ` 1\u001b 4  \u0002text\u0000\u0010\u0000\u0000\u0000New static text\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\benabled\u0000\u0001\u0002description\u0000\u0001\u0000\u0000\u0000\u0000\u0004rosterFixedTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004) \u0014  = J :   A ]\u0002title\u0000\r\u0000\u0000\u0000New Section1\u0000\u0000\u0000\u0002conditionExpression\u0000\u0001\u0000\u0000\u0000\u0000\tcreationDate\u0000?E  P\u0001\u0000\u0000\tlastEntryDate\u0000Y\u000e  P\u0001\u0000\u0000\u0005createdBy\u0000\u0010\u0000\u0000\u0000\u0004  , ֗ I   ܸ \b \busesCSharp\u0000\u0001\u0005publicKey\u0000\u0010\u0000\u0000\u0000\u0004J<   }`M  ('o h \u0002title\u0000\r\u0000\u0000\u0000Copy of test\u0000\u0004fixedRosterTitles\u0000\u0005\u0000\u0000\u0000\u0000\u0004sharedPersons\u0000\u0005\u0000\u0000\u0000\u0000\u0012lastEventSequence\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0005clonedFromQuestionnaireId\u0000\u0010\u0000\u0000\u0000\u0004\u000b Ĝ  &A ꐐ斷N\u0012clonedFromQuestionnaireVersion\u0000 \u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0000"));
*/

            _jsonSerializer = CreateNewtonJsonUtils(new JsonSerializerSettingsFactory());
        };

        Because of = () =>
            data.ForEach(x => result.Add(_jsonSerializer.Deserialize(Encoding.UTF8.GetBytes(x.Item2), eventTypeResolver.ResolveType(x.Item1.ToPascalCase()), TypeSerializationSettings.Event, SerializationType.Bson)));

        It should_return_not_null_result = () =>
            result.Count.ShouldEqual(1);

        private const string serializedQuestionnaire = @"{""$type"":""Main.Core.Documents.QuestionnaireDocument, Main.Core"",""Children"":[],""CreationDate"":""2015-04-22T15:40:21.559966-04:00"",""LastEntryDate"":""2015-04-22T15:40:21.5834289-04:00"",""PublicKey"":""3708184d-f61a-4e93-849d-b308fb92697e""}";
        private static NewtonJsonSerializer _jsonSerializer;
        //private static QuestionnaireDocument result;

        private static EventTypeResolver eventTypeResolver;
        private static List<Tuple<string, string>> data = new List<Tuple<string, string>>();
        private static HashSet<object> result = new HashSet<object>();

        
    }
}