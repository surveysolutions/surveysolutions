@using System.Web.Optimization
@using WB.Core.BoundedContexts.Headquarters.UserPreloading.Dto
@using WB.Core.GenericSubdomains.Portable
@using WB.Core.SharedKernels.SurveyManagement.Web.Utils
@model WB.Core.BoundedContexts.Headquarters.UserPreloading.Dto.UserPreloadingProcess
@{
    Layout = "~/Views/Shared/_LayoutWithoutSidebar.cshtml";
}

@section scripts
{
    @Scripts.Render("~/validate")
}

<div class="row-fluid">
    <h3>@BatchUpload.UploadUsers</h3>
    <br />
    <div>
        <table class="table table-striped table-bordered table-condensed table-break-words">
            <tbody>
                <tr>
                    <th>@BatchUpload.FileName</th>
                    <th>@Model.FileName</th>
                </tr>
                <tr>
                    <th>@BatchUpload.FileSize</th>
                    <th>@FileSizeUtils.SizeSuffix(Model.FileSize)</th>
                </tr>
                <tr>
                    <th>@BatchUpload.RecordsCount</th>
                    <th>@Model.RecordsCount</th>
                </tr>
                <tr>
                    <th>@BatchUpload.Status</th>
                    <th>@BatchUpload.ResourceManager.GetString(Model.State.ToString())</th>
                </tr>
                <tr>
                    <th>@BatchUpload.UploadDate</th>
                    <th>@TimeZoneInfo.ConvertTimeFromUtc(Model.UploadDate, TimeZoneInfo.Local)</th>
                </tr>
                <tr>
                    <th>@BatchUpload.LastUpdateDate</th>
                    <th>@TimeZoneInfo.ConvertTimeFromUtc(Model.LastUpdateDate, TimeZoneInfo.Local)</th>
                </tr>
            </tbody>

        </table>
        @if (Model.State == UserPrelodingState.Uploaded)
        {
            using (Html.BeginForm("VerifyUserPreloadig", "BatchUserUpload"))
             {
                 @Html.AntiForgeryToken()
                 @Html.Hidden("Id", Model.UserPreloadingProcessId)
                 <input type="submit" class="btn btn-default btn-primary pull-right" name="Submit" value="@BatchUpload.Verify"/>
             }
        }
    </div>
</div>

