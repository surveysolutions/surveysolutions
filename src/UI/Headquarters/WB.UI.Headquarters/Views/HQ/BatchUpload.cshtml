@using WB.UI.Headquarters.Models
@model WB.UI.Headquarters.Models.BatchUploadModel
@{
    Layout = "~/Views/Shared/_LayoutWithoutSidebar.cshtml";
    ViewBag.Title = "Index";
}

<div class="row-fluid">
    <h3>Upload sample </h3>
    <div>
        To upload the sample to be interviewed, please prepare a file with coma-separated values (.csv file) corresponding to the template below, containing values of those variables from your questionnaire that were marked as pre-filled.
    </div>
    <br />
    <div>
        <table class="table table-striped table-bordered table-condensed table-break-words">
            <thead>
                <tr>
                    @foreach (var item in Model.FeaturedQuestions)
                    {
                        <th>@Html.DisplayFor(modelItem => item.Caption)</th>
                    }
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < 5; i++)
                {

                    <tr>
                        @foreach (var item in Model.FeaturedQuestions)
                        {
                            <th>_</th>
                        }
                    </tr>

                }
            </tbody>
        </table>
    </div>

    <div>
        @using (Html.BeginForm("SampleBatchUpload", "HQ", new { id = Model.QuestionnaireId, version = Model.QuestionnaireVersion }, FormMethod.Post, new { enctype = "multipart/form-data" }))
        {

            @Html.HiddenFor(x => x.QuestionnaireId)
            @Html.HiddenFor(x => x.QuestionnaireVersion)
            <br />
            <div class="control-group">
                <div class="controls">
                    <input type="file" name="file" accept=".csv" />
                    @Html.ValidationMessageFor(x => x.File)
                </div>
            </div>
            <input type="submit" class="btn btn-primary" name="Submit" value="Upload" />
        }
    </div>

    <h3>Advanced data upload mode</h3>
    <div>
        In order to pre-load data to more sections and variables, you can prepare a set of .csv files that correspond to the structure of your questionnaire and put in a .zip archive . Please use the template archive below. You can put only those files and columns that you wish to upload. Any columns left missing or with titles not corresponding to an existing variable in the questionnaire will be ignored.
    </div>
    <br />
    <a href="@Url.Action("TemplateDownload", "HQ", new { id = Model.QuestionnaireId, version = Model.QuestionnaireVersion })" class="btn">download template archive</a>

    <div>
        @using (Html.BeginForm("PanelBatchUpload", "HQ", routeValues: new { id = Model.QuestionnaireId, version = Model.QuestionnaireVersion }, method: FormMethod.Post, htmlAttributes: new { enctype = "multipart/form-data" }))
        {

            @Html.HiddenFor(x => x.QuestionnaireId)
            @Html.HiddenFor(x => x.QuestionnaireVersion)
            <br />
            <div class="control-group">
                <div class="controls">
                    <input type="file" name="file" accept=".zip" />
                    @Html.ValidationMessageFor(x => x.File)
                </div>
            </div>
            <input type="submit" class="btn btn-primary" name="Submit" value="Upload" />
        }
    </div>
</div>

