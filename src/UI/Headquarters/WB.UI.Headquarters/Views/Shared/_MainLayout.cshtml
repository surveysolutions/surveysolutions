@using Main.Core.Entities.SubEntities
@using Microsoft.Practices.ServiceLocation
@using WB.Core.Infrastructure.Versions
@using WB.Core.SharedKernels.SurveyManagement.Web.Code
@using WB.UI.Headquarters.Resources
@using WB.UI.Shared.Web.Extensions
<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @this.GenerateFavicon(Url.Content("~/Content/identity/favicon-hq"))

    <!-- cssLibs:css -->
    <!-- endinject -->
    <!-- cssApp:css -->
    <link rel="stylesheet" href="@Url.Content("~/Dependencies/css/markup.css")">
    <!-- endinject -->
    <!-- jsLibs:js -->
    <script src="../../Dependencies/vendor/jquery/dist/jquery.js"></script>
    <script src="../../Dependencies/vendor/bootstrap-sass/assets/javascripts/bootstrap.js"></script>
    <script src="../../Dependencies/vendor/knockout/dist/knockout.js"></script>
    <script src="../../Dependencies/vendor/knockout-mapping/build/output/knockout.mapping-latest.js"></script>
    <script src="../../Dependencies/vendor/moment/moment.js"></script>
    <script src="../../Dependencies/vendor/lodash/lodash.js"></script>
    <script src="../../Dependencies/vendor/datatables.net/js/jquery.dataTables.js"></script>
    <script src="../../Dependencies/vendor/datatables.net-select/js/dataTables.select.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.animate.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.buttons.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.callbacks.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.confirm.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.desktop.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.history.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.mobile.js"></script>
    <script src="../../Dependencies/vendor/pnotify/dist/pnotify.nonblock.js"></script>
    <!-- endinject -->
    
    <script>
        $(document).ready(function () {
            $(".navbar-toggle").click(function () {
                $(".navbar-collapse").fadeToggle();
                $(".navbar-collapse").animate({ height: '100%' }, 0);
                $(".top-menu").toggleClass("top-animate");
                $(".mid-menu").toggleClass("mid-animate");
                $(".bottom-menu").toggleClass("bottom-animate");
            });
        });
    </script>
    <title>@ViewBag.Title</title>
    @RenderSection("scripts", false)
</head>
<body>
    <header>
        <div class="container-fluid">
            <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <div class="container-fluid ">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <a href="javascript:void(0);" class="active-page">@Html.ActivePage()</a>
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar top-menu"></span>
                            <span class="icon-bar mid-menu"></span>
                            <span class="icon-bar bottom-menu"></span>
                        </button>
                        <a class="navbar-brand" href="@Url.Action("Index", "Account")">
                            <div class="retina logo">Survey Solutions</div>
                        </a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="navbar">
                        @if (User.IsInRole(UserRoles.Administrator.ToString()))
                        {
                            @Html.Partial("AdminMainMenu")
                        }
                        else if (User.IsInRole(UserRoles.Headquarter.ToString()))
                        {
                            @Html.Partial("HeadquartersMainMenu")
                        }
                        else if (User.IsInRole(UserRoles.Observer.ToString()))
                        {
                            @Html.Partial("ObserverMainMenu")
                        }
                        else
                        {
                            @Html.Partial("SupervisorMainMenu")
                        }
                    </div><!-- /.navbar-collapse -->
                </div><!-- /.container-fluid -->
            </nav>
        </div>
    </header>
    @RenderBody()
    <footer class="footer">
        <div class="container-fluid">
            <div class="text-left">
                &copy; @DateTime.Now.Year.ToString() <a href="http://www.worldbankgroup.org">@Pages.Layout_WorldBank</a>, @Pages.Layout_RightsReserved <a href="http://go.worldbank.org/OS6V7NIUD0">@Pages.Layout_Legal</a>.
            </div>
            <div class="text-left">
                @(ServiceLocator.Current.GetInstance<IProductVersion>())
                @if (AppSettings.IsDebugBuilded)
            {
                    <span id="build-config">[.NET Debug]</span>
                }

                @if (HttpContext.Current.IsDebuggingEnabled)
            {
                    <span id="compile-config" style="color: red">Web Debug</span>
                }
                <span>|</span>
                <a href="@Url.Action("GetLatestVersion", "api/InterviewerSync", new {area = string.Empty})">@Common.GetInterviewerApp</a>
            </div>
        </div>
    </footer>

    <!-- jsApp:js -->
    <!-- endinject -->

    @Html.Partial("Clickjacking")
    @Html.Partial("GlobalSettings")
</body>
</html>
