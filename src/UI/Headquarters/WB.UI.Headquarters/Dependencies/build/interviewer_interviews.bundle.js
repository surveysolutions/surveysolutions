webpackJsonp([0],{312:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(50),s=n(313),a=n(62),r=n(315),o=n.n(r),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{attrs:{title:t.title,hasFilter:!0}},[n("Filters",{slot:"filters"},[n("FilterBlock",{attrs:{title:t.$t("Pages.Template")}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.questionnaireId,expression:"questionnaireId"}],staticClass:"selectpicker",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.questionnaireId=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:null}},[t._v(t._s(t.$t("Common.Any")))]),t._v(" "),t._l(t.questionnaires,function(e){return n("option",{key:e.key,domProps:{value:e.key}},[t._v("\n                    "+t._s(e.value)+"\n                ")])})],2)]),t._v(" "),n("FilterBlock",{attrs:{title:t.$t("Pages.Filters_Assignment")}},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.assignmentId,expression:"assignmentId"}],staticClass:"form-control with-clear-btn",attrs:{placeholder:t.$t("Common.Any"),type:"text"},domProps:{value:t.assignmentId},on:{input:function(e){e.target.composing||(t.assignmentId=e.target.value)}}}),t._v(" "),n("div",{staticClass:"input-group-btn",on:{click:t.clearAssignmentFilter}},[n("div",{staticClass:"btn btn-default"},[n("span",{staticClass:"glyphicon glyphicon-remove",attrs:{"aria-hidden":"true"}})])])])])],1),t._v(" "),n("DataTables",{ref:"table",attrs:{tableOptions:t.tableOptions,addParamsToRequest:t.addFilteringParams,contextMenuItems:t.contextMenuItems}}),t._v(" "),n("Confirm",{ref:"confirmRestart",attrs:{id:"restartModal"},slot:"modals"},[t._v("\n        "+t._s(t.$t("Pages.InterviewerHq_RestartConfirm"))+"\n        "),n("FilterBlock",[n("div",{staticClass:"form-group "},[n("div",{staticClass:"field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.restart_comment,expression:"restart_comment"}],staticClass:"form-control with-clear-btn",attrs:{type:"text"},domProps:{value:t.restart_comment},on:{input:function(e){e.target.composing||(t.restart_comment=e.target.value)}}})])])])],1),t._v(" "),n("Confirm",{ref:"confirmDiscard",attrs:{id:"discardConfirm"},slot:"modals"},[t._v("\n        "+t._s(t.$t("Pages.InterviewerHq_DiscardConfirm"))+"\n    ")])],1)},c=[],u={render:l,staticRenderFns:c},d=u,f=n(10),p=f(o.a,d,null,null,null),m=p.exports;n(41).default.registerModule("interviews",{actions:{openInterview:function(t,e){t.dispatch("showProgress",!0),window.location=t.rootState.config.interviewerHqEndpoint+"/OpenInterview/"+e},discardInterview:function(t,e){var n=e.callback,i=e.interviewId;$.ajax({url:t.rootState.config.interviewerHqEndpoint+"/DiscardInterview/"+i,type:"DELETE",success:n})}}}),i.a.use(s.a),i.a.http.headers.common.Authorization=input.settings.acsrf.token,Object(a.a)({app:m})},314:function(t,e){},315:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{restart_comment:null,questionnaireId:null,assignmentId:null}},watch:{questionnaireId:function(t){this.reload()},assignmentId:function(t){this.reload()}},computed:{statuses:function(){return this.config.statuses},questionnaires:function(){return this.config.questionnaires},title:function(){return this.config.title},config:function(){return this.$store.state.config},tableOptions:function(){return{rowId:"id",order:[[3,"desc"]],deferLoading:0,columns:this.getTableColumns(),ajax:{url:this.config.allInterviews,type:"GET",contentType:"application/json"},select:{style:"multi",selector:"td>.checkbox-filter"},sDom:'f<"table-with-scroll"t>ip'}}},methods:{reload:_.debounce(function(){this.$refs.table.reload()},500),contextMenuItems:function(t){var e=t.rowData,n=t.rowIndex,i=[],s=this;return"Completed"!=e.status&&i.push({name:s.$t("Pages.InterviewerHq_OpenInterview"),callback:function(){return s.$store.dispatch("openInterview",e.interviewId)}}),e.canDelete&&i.push({name:s.$t("Pages.InterviewerHq_DiscardInterview"),callback:function(){s.discardInterview(e.interviewId,n)}}),"Completed"==e.status&&i.push({name:s.$t("Pages.InterviewerHq_RestartInterview"),callback:function(){s.$refs.table.disableRow(n),s.restartInterview(e.interviewId)}}),i},discardInterview:function(t,e){var n=this;this.$refs.confirmDiscard.promt(function(i){i&&(n.$refs.table.disableRow(e),n.$store.dispatch("discardInterview",{interviewId:t,callback:n.reload}))})},restartInterview:function(t){var e=this,n=this;n.$refs.confirmRestart.promt(function(i){i?$.post(e.config.interviewerHqEndpoint+"/RestartInterview/"+t,{comment:n.restart_comment},function(e){n.restart_comment="",n.$store.dispatch("openInterview",t)}):n.$refs.table.reload()})},addFilteringParams:function(t){t.statuses=this.statuses,this.questionnaireId&&(t.questionnaireId=this.questionnaireId.key),this.assignmentId&&(t.assignmentId=this.assignmentId)},getTableColumns:function(){return[{data:"key",name:"Key",title:this.$t("Common.InterviewKey"),orderable:!0,searchable:!0},{data:"assignmentId",name:"AssignmentIdKey",title:this.$t("Common.Assignment"),orderable:!1,searchable:!1},{data:"featuredQuestions",title:this.$t("Assignments.IdentifyingQuestions"),class:"prefield-column first-identifying last-identifying sorting_disabled visible",orderable:!1,searchable:!1,render:function(t){var e=_.map(t,function(t){return t.question+": "+t.answer});return _.join(e,", ")},responsivePriority:4},{data:"lastEntryDate",name:"UpdateDate",title:this.$t("Assignments.UpdatedAt"),searchable:!1}]},clearAssignmentFilter:function(){this.assignmentId=null}},mounted:function(){this.reload()}}},41:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(50),s=n(127);i.a.use(s.a);var a=JSON.parse(window.vueApp.getAttribute("configuration")),r=new s.a.Store({state:{pendingHandle:null,pendingProgress:!1,config:a},actions:{showProgress:function(t){t.commit("SET_PROGRESS_TIMEOUT",setTimeout(function(){t.commit("SET_PROGRESS",!0)},750))},hideProgress:function(t){clearTimeout(t.state.pendingHandle),t.commit("SET_PROGRESS",!1)}},mutations:{SET_PROGRESS:function(t,e){t.pendingProgress=e},SET_PROGRESS_TIMEOUT:function(t,e){t.pendingHandle=e}},getters:{config:function(t){return t.config}}});e.default=r},62:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n(97),n(50)),s=n(90),a=n.n(s),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"combo-box"},[n("div",{staticClass:"btn-group btn-input clearfix"},[n("button",{staticClass:"btn dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[null===t.value?n("span",{staticClass:"gray-text",attrs:{"data-bind":"label"}},[t._v(t._s(t.placeholderText))]):n("span",{attrs:{"data-bind":"label"}},[t._v(t._s(t.value.value))])]),t._v(" "),n("ul",{ref:"dropdownMenu",staticClass:"dropdown-menu",attrs:{role:"menu"}},[n("li",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"searchBox",attrs:{type:"text",id:t.inputId,placeholder:"Search"},domProps:{value:t.searchTerm},on:{input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},t.updateOptionsList],keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40))return null;t.onSearchBoxDownKey(e)}}})]),t._v(" "),t._l(t.options,function(e){return n("li",{key:e.key},[n("a",{attrs:{href:"javascript:void(0);"},domProps:{innerHTML:t._s(t.highlight(e.value,t.searchTerm))},on:{click:function(n){t.selectOption(e)},keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38))return null;t.onOptionUpKey(e)}}})])}),t._v(" "),t.isLoading?n("li",[n("a",[t._v("Loading...")])]):t._e(),t._v(" "),t.isLoading||0!==t.options.length?t._e():n("li",[n("a",[t._v("No results found")])])],2)]),t._v(" "),null!==t.value?n("button",{staticClass:"btn btn-link btn-clear",on:{click:t.clear}},[n("span")]):t._e()])},o=[],l={render:r,staticRenderFns:o},c=l,u=n(10),d=u(a.a,c,null,null,null),f=d.exports,p=n(91),m=n.n(p),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[t._t("filters"),t._v(" "),n("div",{class:t.information},[n("div",{staticClass:"page-header clearfix"},[n("h1",[t._v("\n\t\t\t\t\t\t"+t._s(t.title)+"\n\t\t\t\t\t")])]),t._v(" "),t._t("default")],2)],2),t._v(" "),t._t("modals"),t._v(" "),n("ModalFrame",{ref:"pending",attrs:{id:"pendingProgress",title:t.$t("Common.Loading"),canClose:!1}},[n("div",{staticClass:"progress progress-striped active",staticStyle:{"margin-bottom":"0"}},[n("div",{staticClass:"progress-bar",staticStyle:{width:"100%"}})])])],2)])},v=[],g={render:h,staticRenderFns:v},b=g,w=n(10),$=w(m.a,b,null,null,null),y=$.exports,C=n(92),I=n.n(C),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"filters"},[t._m(0),t._v(" "),n("div",{staticClass:"filters-container"},[n("h4",[t._v(t._s(t.$t("Pages.FilterTitle")))]),t._v(" "),t._t("default")],2)])},P=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"foldback-button",attrs:{id:"hide-filters"}},[n("span",{staticClass:"arrow"}),t._v(" "),n("span",{staticClass:"arrow"}),t._v(" "),n("span",{staticClass:"glyphicon glyphicon-tasks",attrs:{"aria-hidden":"true"}})])}],k={render:x,staticRenderFns:P},T=k,O=n(10),R=O(I.a,T,null,null,null),S=R.exports,E=n(93),F=n.n(E),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block-filter"},[n("h5",[t._v(t._s(t.title))]),t._v(" "),t._t("default")],2)},q=[],M={render:j,staticRenderFns:q},D=M,A=n(10),L=A(F.a,D,null,null,null),H=L.exports,B=n(94),U=n.n(B),N=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},G=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table table-striped table-ordered table-bordered table-hover table-with-checkboxes table-with-prefilled-column table-interviews responsive"},[n("thead"),t._v(" "),n("tbody")])}],K={render:N,staticRenderFns:G},J=K,z=n(10),Q=z(U.a,J,null,null,null),V=Q.exports,W=n(95),X=n.n(W),Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade",attrs:{id:t.id,tabindex:"-1",role:"dialog"}},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t.canClose?n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),n("h2",[t._v(t._s(t.title))])]),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"modal-footer"},[t._t("actions")],2)])])])},Z=[],tt={render:Y,staticRenderFns:Z},et=tt,nt=n(10),it=nt(X.a,et,null,null,null),st=it.exports,at=n(96),rt=n.n(at),ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ModalFrame",{attrs:{id:t.id,title:t.confirm_title}},[t._t("default"),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.confirm},slot:"actions"},[t._v(t._s(t.$t("Common.Ok")))]),t._v(" "),n("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:t.cancel},slot:"actions"},[t._v(t._s(t.$t("Common.Cancel")))])],2)},lt=[],ct={render:ot,staticRenderFns:lt},ut=ct,dt=n(10),ft=dt(rt.a,ut,null,null,null),pt=ft.exports,mt=n(126),ht={install:function(t,e){mt.a.init(Object.assign({fallbackLng:"en"},e)),Object.defineProperty(t,"$t",{get:function(){return function(t,e){return mt.a.t(t,e)}}}),Object.defineProperty(t.prototype,"$t",{get:function(){return function(t,e){return mt.a.t(t,e)}}})}},vt=ht,gt=(n(41),JSON.parse(window.vueApp.getAttribute("configuration")));i.a.use(vt,{nsSeparator:".",keySeparator:":",resources:{en:gt.resources}}),i.a.component("Layout",y),i.a.component("Filters",S),i.a.component("FilterBlock",H),i.a.component("Typeahead",f),i.a.component("DataTables",V),i.a.component("ModalFrame",st),i.a.component("Confirm",pt);e.a=function(t){var e=t.app,s=t.options,a=n(41).default;new i.a(_.assign({el:"#vueApp",render:function(t){return t(e)},components:{app:e},store:a},s))}},90:function(t,e,n){"use strict";t.exports={name:"user-selector",props:["fetchUrl","controlId","value","placeholder","ajaxParams"],data:function(){return{options:[],isLoading:!1,searchTerm:""}},computed:{inputId:function(){return"sb_"+this.controlId},placeholderText:function(){return this.placeholder||"Select"}},mounted:function(){var t=this,e=$(this.$el),n=e.find("#"+this.inputId);e.on("shown.bs.dropdown",function(){n.focus(),t.fetchOptions(t.searchTerm)}),e.on("hidden.bs.dropdown",function(){t.searchTerm=""})},methods:{onSearchBoxDownKey:function(t){$(this.$refs.dropdownMenu).find("a").first().focus()},onOptionUpKey:function(t){1===$(t.target).parent().index()&&(this.$refs.searchBox.focus(),t.stopPropagation())},fetchOptions:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isLoading=!0;var n=Object.assign({query:e,cache:!1},this.ajaxParams);this.$http.get(this.fetchUrl,{params:n}).then(function(e){t.options=e.body.options||[],t.isLoading=!1},function(e){t.isLoading=!1})},clear:function(){this.$emit("selected",null,this.controlId),this.searchTerm=""},selectOption:function(t){this.$emit("selected",t,this.controlId)},updateOptionsList:function(t){this.fetchOptions(t.target.value)},highlight:function(t,e){var n=_.escape(t);if(e){var i=_.escape(_.escapeRegExp(e)),s=new RegExp(i,"ig");return n.replace(s,function(t,e,n){return"<strong>"+t+"</strong>"})}return n}}}},91:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:String,hasFilter:{type:Boolean,default:function(){return!1}}},watch:{showProgress:function(t){t?$(this.$refs.pending.$el).modal({backdrop:"static",keyboard:!1}):$(this.$refs.pending.$el).modal("hide")}},computed:{information:function(){return{"main-information":this.hasFilter,information:!this.hasFilter}},showProgress:function(){return this.$store.state.pendingProgress}}}},92:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},93:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["title"]}},94:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{addParamsToRequest:{type:Function,default:function(t){return t}},responseProcessor:{type:Function,default:function(t){return t}},tableOptions:{type:Object,default:function(){return{}}},contextMenuItems:{type:Function,default:function(){return[]}},authorizedUser:{type:Object,default:function(){return{}}}},data:function(){return{table:null}},methods:{reload:function(t){this.table.ajax.data=this.addParamsToRequest(t||{}),this.table.rows().deselect(),this.table.ajax.reload()},disableRow:function(t){$(this.table.row(t).node()).addClass("disabled")},selectRowAndGetData:function(t){this.table.rows().deselect();var e=t.parent().children().index(t);this.table.row(e).select();var n=this.table.rows({selected:!0}).data()[0];return this.table.rows().deselect(),{rowData:n,rowIndex:e}},onTableInitComplete:function(){$(this.$el).parents(".dataTables_wrapper").find(".dataTables_filter label").on("click",function(t){t.target===this&&($(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),$(this).children("input[type='search']").delay(200).queue(function(){$(this).focus(),$(this).dequeue()})))})},initContextMenu:function(){var t=this,e={selector:"#"+this.$el.attributes.id.value+" tbody tr",autoHide:!1,build:function(e,n){var i=t.selectRowAndGetData(e);return null!=i.rowData&&{items:t.contextMenuItems(i)}},trigger:"left"};$.contextMenu(e)}},mounted:function(){var t=this,e=this,n=$.extend({processing:!0,serverSide:!0,language:{url:window.input.settings.config.dataTableTranslationsUrl},searchHighlight:!0,pagingType:"full_numbers",lengthChange:!1,pageLength:20,dom:"frtp",conditionalPaging:!0},this.tableOptions);n.ajax.data=function(e){t.addParamsToRequest(e)},n.ajax.complete=function(e){t.responseProcessor(e.responseJSON)},this.table=$(this.$el).DataTable(n),this.table.on("init.dt",this.onTableInitComplete),this.table.on("select",function(t,n,i,s){e.$emit("select",t,n,i,s)}),this.table.on("deselect",function(t,n,i,s){e.$emit("deselect",t,n,i,s)}),this.table.on("click","tbody td",function(){var t=e.table.cell(this);if(null!=t.index()&&t.index().column>0){var n=e.table.row(this).id(),i=e.table.settings().init().columns;e.$emit("cell-clicked",i[this.cellIndex].name,n,t.data())}}),this.$emit("DataTableRef",this.table),this.initContextMenu()}}},95:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{id:String,title:String,canClose:{type:Boolean,default:function(){return!0}}}}},96:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{id:String,title:{type:String,required:!1}},data:function(){return{callback:null}},computed:{confirm_title:function(){return this.title||this.$t("Pages.ConfirmationNeededTitle")}},methods:{cancel:function(){this.callback(!1),$(this.$el).modal("hide")},confirm:function(){this.callback(!0),$(this.$el).modal("hide")},promt:function(t){this.callback=t,$(this.$el).modal()}}}}},[312]);
//# sourceMappingURL=interviewer_interviews.bundle.js.map