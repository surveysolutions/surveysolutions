<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<Target Name="Cleanup HqApp" BeforeTargets="BeforeRebuild" Condition="'$(NCrunch)' != '1'">
    <Message Text="Cleaning up HQ App" />
    <ItemGroup>
      <FilesToDelete Include="HqApp\dist\**\*.*" />
    </ItemGroup>
    <Delete Files="@(FilesToDelete)" />
  </Target>
 
  <Target Name="CollectHqApp" BeforeTargets="CopyAllFilesToSingleFolderForPackage;CopyAllFilesToSingleFolderForMsdeploy" Condition="'$(NCrunch)' != '1'">
    <ItemGroup>
      <CollectHqApp_CustomFiles Include="HqApp\dist\**\*.js;HqApp\dist\**\*.css;HqApp\dist\**\*.json" />
      <FilesForPackagingFromProject Include="%(CollectHqApp_CustomFiles.Identity)">
        <DestinationRelativePath>HqApp\dist\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>

      <PartialViews Include="Views\Shared\partial.*.cshtml" />
      <FilesForPackagingFromProject Include="%(PartialViews.Identity)">
        <DestinationRelativePath>Views\Shared\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup>
  </Target>
  
  <Target Name="CollectHqDepsDist" BeforeTargets="CopyAllFilesToSingleFolderForPackage;CopyAllFilesToSingleFolderForMsdeploy" Condition="'$(NCrunch)' != '1'">
    <ItemGroup>
      <CollectHqDeps_CustomFiles Include="Dependencies\dist\**\*.*" />
      <FilesForPackagingFromProject Include="%(CollectHqDeps_CustomFiles.Identity)">
        <DestinationRelativePath>Dependencies\dist\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>      
    </ItemGroup>
  </Target>

  <Target Name="CustomCollectFilesToExternals" BeforeTargets="CopyAllFilesToSingleFolderForPackage;CopyAllFilesToSingleFolderForMsdeploy" Condition="'$(NCrunch)' != '1'">
    <ItemGroup>
      <CustomCollectFilesToExternals_CustomFiles Include="Externals\**\*" />
      <FilesForPackagingFromProject Include="%(CustomCollectFilesToExternals_CustomFiles.Identity)">
        <DestinationRelativePath>Client\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup>
  </Target>
  <Target Name="CollectVendorFileFonts" BeforeTargets="CopyAllFilesToSingleFolderForPackage;CopyAllFilesToSingleFolderForMsdeploy" Condition="'$(NCrunch)' != '1'">
    <ItemGroup>
      <CollectVendorFileFonts_CustomFiles Include="Dependencies\vendor\bootstrap-sass\assets\fonts\bootstrap\*" />
      <FilesForPackagingFromProject Include="%(CollectVendorFileFonts_CustomFiles.Identity)">
        <DestinationRelativePath>Dependencies\vendor\bootstrap-sass\assets\fonts\bootstrap\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup>
  </Target>
  </Project>