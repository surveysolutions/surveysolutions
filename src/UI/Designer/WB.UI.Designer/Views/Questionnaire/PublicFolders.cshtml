@using WB.UI.Designer.Resources

@{
    ViewBag.Title = QuestionnaireController.QuestionnaireTreeFolders;
}

@section Scripts {
    @Styles.Render("~/Content/plugins/skin")
    @Scripts.Render("~/folders")

    <script type="text/javascript">
        $(function () {
            var localization = {
                CreateSubFolder: "@QuestionnaireController.CreateSubFolder",
                Edit: '@QuestionnaireController.Rename',
                Delete: "@QuestionnaireController.Delete",
                DeleteConfirmation: "@QuestionnaireController.DeleteFolderConfirmation",
                NewFolderName: "@QuestionnaireController.NewFolder",
            };
            var subFoldersUrl  = '@Url.RouteUrl("DefaultApiWithAction", new { httproute = "", controller = "PublicFoldersApi", action = "GetFolders" })';
            var rootFoldersUrl = '@Url.RouteUrl("DefaultApiWithAction", new { httproute = "", controller = "PublicFoldersApi", action = "GetRootFolders" })';
            var addNodeUrl     = '@Url.RouteUrl("DefaultApiWithAction", new { httproute = "", controller = "PublicFoldersApi", action = "CreateFolder" })';
            var renameNodeUrl  = '@Url.RouteUrl("DefaultApiWithAction", new { httproute = "", controller = "PublicFoldersApi", action = "RenameFolder" })';
            var removeNodeUrl  = '@Url.RouteUrl("DefaultApiWithAction", new { httproute = "", controller = "PublicFoldersApi", action = "RemoveFolder" })';

            window.foldersModel = new FoldersModel($("#jstree"), localization, rootFoldersUrl, subFoldersUrl, addNodeUrl, renameNodeUrl, removeNodeUrl);
        });
    </script>
}

<div id="edit-form">
    <h1>@QuestionnaireController.FoldersManagement</h1>
    <p class="note">@Html.Raw(QuestionnaireController.FoldersDescription)</p>

    <div id="jstree" class="folder-tree disableSelection">
    </div>
</div>


