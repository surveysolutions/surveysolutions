@using System.Web.Configuration
@using WB.Core.BoundedContexts.Designer.Implementation.Services.Accounts.Membership
@using WB.UI.Designer
@using WB.UI.Designer.Resources
@using WB.UI.Shared.Web.Extensions
@{
    IMembershipUserService userHelper = ViewBag.UserHelper;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>@this.ViewBag.Title</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @Styles.Render("~/questionnaire/content/designer-start/css-list")
    @Styles.Render("~/Content/css-list")
    
    @Scripts.Render("~/simplepage")

    @this.GenerateFavicon(Url.Content("~/Content/identity/favicon-designer"))
    @this.RenderSection("Styles", required: false)
    @this.RenderSection("Scripts", required: false)

    <script type="text/javascript">
        function FrameCheck() {
            if (top != self)
                top.location.replace(self.location.href);
        }

        $(function() {
            if (window.moment) {
                moment.locale('@UICulture');

                $('time').each(function () {
                    var me = $(this);
                    var date = me.attr('datetime') || me.attr('time');
                    var momentDate = moment.utc(date).local().format('MMM DD, YYYY HH:mm');
                    me.text(momentDate);
                });
            }
        });
    </script>

</head>
<body onload="FrameCheck();">
<div class="container-wb-list">
    <div class="header-wb-list">
        <header>

            <div class="questionnaire-logo">
                <a class="logo" href="https://mysurvey.solutions/" target="_blank">
                    <img src="~/questionnaire/content/i/logo.png" alt="Survey Solutions" class="pull-left">
                    <span class="pull-left">Survey<br>Solutions</span>
                </a>
                @Html.ActionLink(QuestionnaireController.Designer, "Index", "Questionnaire", null, new { @class = "navbar-text" })
            </div>


            @*@Html.ActionLink(QuestionnaireController.Designer, "Index", "Questionnaire", null, new { @class = "questionnaire-logo" })*@

            <ul class="nav nav-tabs">

                @Html.MenuActionLink(QuestionnaireController.MyQuestionnaires, "Index", "Questionnaire", "presentation")
                @Html.MenuActionLink(QuestionnaireController.SharedQuestionnaires, "Shared", "Questionnaire", "presentation")
                @Html.MenuActionLink(QuestionnaireController.PublicQuestionnaires, "Public", "Questionnaire", "presentation")
                @if (userHelper.WebUser.IsAdmin)
                {
                    @Html.MenuActionLink(QuestionnaireController.QuestionnaireTreeFolders, "PublicFolders", "Questionnaire", "presentation")
                }
                @if (userHelper.WebUser.IsAdmin)
                {
                    @Html.MenuActionLink(QuestionnaireController.ManageUsers, "Index", "Admin", "presentation")
                }
                <li role="presentation" class="create">
                    @Html.ActionLink(QuestionnaireController.CreateNew, "Create", "Questionnaire", null, new { @class = "btn" })
                </li>
            </ul>
            <nav>
                <a class="btn btn-default" target="_blank" href="@WebConfigurationManager.AppSettings["DesignerHelpUrl"]">@AccountResources.Help</a>
                @if (userHelper.WebUser.IsAdmin)
                {
                    <a class="btn btn-default" href="@Url.Action("RestoreQuestionnaire", "Admin")">@QuestionnaireController.RestoreQuestionnaire</a>
                }
                <div class="btn-group">
                    <a class="btn btn-default">@string.Format(QuestionnaireController.Hello, @userHelper.WebUser.UserName)</a>
                    <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="caret"></span>
                        <span class="sr-only"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right">
                        <li>@Html.ActionLink(AccountResources.ManageAccount, "Manage", "Account")</li>
                        <li>@Html.ActionLink(AccountResources.Logout, "LogOff", "Account")</li>
                    </ul>
                </div>

            </nav>
        </header>
    </div>
    <section id="designer-list">
        @this.RenderBody()
    </section>
</div>
@this.RenderSection("Modal", required: false)
</body>
</html>
