<form role="form" id="roster-editor" name="editRosterForm" unsaved-warning-form>
    <div class="form-holder">
        <div class="breadcrumbs-container">
            <div data-item-breadcrumbs data-crumbs="activeRoster.breadcrumbs"></div>
        </div>
        <div class="row">
            <div class="form-group col-xs-7">
                <label for="edit-group-title" class="wb-label">Roster Type</label><br>
                <div class="btn-group type-container-dropdown" dropdown>
                    <button id="rosterTypeBtn" class="btn btn-default dropdown-toggle form-control" dropdown-toggle type="button">
                        {{activeRoster.getTitleForRosterType()}}
                        <span class="dropdown-arrow"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="rosterTypeBtn">
                        <li role="presentation" ng-repeat="type in activeRoster.rosterTypeOptions">
                            <a role="menuitem" tabindex="-1" href="javascript:void(0);" ng-click="updateRosterType(type.value)">{{type.text}}</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="form-group input-variable-name col-xs-4 pull-right">
                <label for="edit-group-variableName" class="wb-label">Variable name <help key="variableName" placement="left" /></label><br>
                <input id="edit-group-variableName" type="text" class="wb-input bg-white width-auto" ng-model="activeRoster.variableName" maxlength="32" spellcheck="false">
            </div>
        </div>

        <div class="form-group">
            <label for="edit-group-title" class="wb-label">Title</label><br>
            <textarea id="edit-group-title" class="form-control" ng-model="activeRoster.title" msd-elastic></textarea>

            <div class="roster-type-specific-block" ng-include="activeRoster.type + '-template.html'" ng-if="activeRoster.type != undefined">
            </div>

        </div>

        <div class="form-group">
            <label for="edit-group-condition" class="wb-label">Condition expression <help key="conditionExpression"/></label><br>
            <div class="pseudo-form-control">
                <div id="edit-group-condition" ui-ace="{ onLoad : aceLoaded }" ng-model="activeRoster.enablementCondition"></div>
            </div>
        </div>
    </div>

    <div class="form-buttons-holder">
        <div class="pull-left">
            <button type="submit" id="edit-roster-save-button" class="btn btn-lg" ng-class="{ 'btn-primary': editRosterForm.$dirty }" ng-click="saveRoster()" unsaved-warning-clear ng-disabled="!editRosterForm.$valid">Save</button>
            <button type="reset" id="edit-chapter-cancel-button" class="btn btn-lg btn-link" unsaved-warning-clear ng-click="cancelRoster()">Cancel</button>
        </div>
        <div class="pull-right">
            <button type="button" id="edit-chapter-delete-button" class="btn btn-lg btn-link" unsaved-warning-clear ng-click="deleteRoster()" unsaved-warning-clear>Delete</button>
            <button type="button" id="edit-chapter-clone-button" class="btn btn-lg btn-link" ng-click="cloneGroup()">Clone</button>
            <ng-include src="'moveToChapterSnippet'" />
        </div>
    </div>

    <script type="text/ng-template" id="List-template.html">

        <div class="dropdown-with-breadcrumbs-and-icons">
            <label>Source question (answer generates number of rows): </label>
            <div class="btn-group" dropdown>
                <button class="btn dropdown-toggle" dropdown-toggle type="button">
                    <span class="select-placeholder" ng-if="selectedListQuestion == null">Select question</span>
                    <span class="selected-item" ng-if="selectedListQuestion !== null">
                        <span class="path">{{selectedListQuestion.breadcrumbs}}</span>
                        <span class="chosen-item"><i class="dropdown-icon" ng-class="'icon-'+selectedListQuestion.type"></i>{{selectedListQuestion.title}}</span>
                    </span>
                    <span class="dropdown-arrow"></span>
                </button>

                <ul class="dropdown-menu" role="menu">
                    <li role="presentation" ng-class="{'dropdown-header': breadCrumb.isSectionPlaceHolder}" ng-repeat="breadCrumb in activeRoster.lists">
                        <span ng-if="breadCrumb.isSectionPlaceHolder">{{breadCrumb.title}}</span>

                        <a ng-if="!breadCrumb.isSectionPlaceHolder"
                           ng-click="selectListQuestion(breadCrumb.id)"
                           role="menuitem"
                           tabindex="-1"
                           href="javascript:void(0);">
                            <i class="dropdown-icon" ng-class="'icon-'+breadCrumb.type"></i> {{breadCrumb.title}}
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </script>

    <script type="text/ng-template" id="Numeric-template.html">

        <div class="dropdown-with-breadcrumbs-and-icons">
            <label>Source question (answer generates number of rows):</label>
            <div class="btn-group" dropdown>
                <button class="btn dropdown-toggle" dropdown-toggle type="button">
                    <span class="select-placeholder" ng-if="selectedNumericQuestion == null">Select question</span>
                    <span class="selected-item" ng-if="selectedNumericQuestion !== null">
                        <span class="path">{{selectedNumericQuestion.breadcrumbs}}</span>
                        <span class="chosen-item"><i class="dropdown-icon" ng-class="'icon-'+selectedNumericQuestion.type"></i>{{selectedNumericQuestion.title}}</span>
                    </span>
                    <span class="dropdown-arrow"></span>
                </button>

                <ul class="dropdown-menu" role="menu">
                    <li role="presentation" ng-class="{'dropdown-header': breadCrumb.isSectionPlaceHolder}" ng-repeat="breadCrumb in activeRoster.numerics">
                        <span ng-if="breadCrumb.isSectionPlaceHolder">{{breadCrumb.title}}</span>

                        <a ng-if="!breadCrumb.isSectionPlaceHolder"
                           ng-click="selectNumericQuestion(breadCrumb.id)"
                           role="menuitem"
                           tabindex="-1"
                           href="javascript:void(0);">
                            <i class="dropdown-icon" ng-class="'icon-'+breadCrumb.type"></i> {{breadCrumb.title}}
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="dropdown-with-breadcrumbs-and-icons">
            <label>Titles of rows:</label>
            <div class="btn-group" dropdown>
                <button class="btn dropdown-toggle" dropdown-toggle type="button">
                    <span class="select-placeholder" ng-if="selectedTitleQuestion == null">Select question</span>
                    <span class="selected-item" ng-if="selectedTitleQuestion !== null">
                        <span class="path">{{selectedTitleQuestion.breadcrumbs}}</span>
                        <span class="chosen-item"><i class="dropdown-icon" ng-class="'icon-'+selectedTitleQuestion.type"></i>{{selectedTitleQuestion.title}}</span>
                    </span>
                    <span class="dropdown-arrow"></span>
                </button>

                <ul class="dropdown-menu" role="menu">
                    <li role="presentation" ng-class="{'dropdown-header': breadCrumb.isSectionPlaceHolder}" ng-repeat="breadCrumb in activeRoster.titles">
                        <span ng-if="breadCrumb.isSectionPlaceHolder">{{breadCrumb.title}}</span>

                        <a ng-if="!breadCrumb.isSectionPlaceHolder"
                           ng-click="selectTitleQuestion(breadCrumb.id)"
                           role="menuitem"
                           tabindex="-1"
                           href="javascript:void(0);">
                            <i class="dropdown-icon" ng-class="'icon-'+breadCrumb.type"></i> {{breadCrumb.title}}
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </script>

    <script type="text/ng-template" id="Fixed-template.html">
        <div class="form-group">
            <label for="edit-fixed-roster-title" class="wb-label">Fixed roster titles: <help key="fixedTitles" /></label>
            <textarea id="edit-fixed-roster-title" class="form-control" ng-model="activeRoster.rosterFixedTitles" msd-elastic split-array></textarea>
        </div>
    </script>

    <script type="text/ng-template" id="Multi-template.html">

        <div class="dropdown-with-breadcrumbs-and-icons">
            <label>Source question (answer generates number of rows): </label>
            <div class="btn-group" dropdown>
                <button class="btn dropdown-toggle" dropdown-toggle type="button">
                    <span class="select-placeholder" ng-if="selectedMultiQuestion == null">Select question</span>
                    <span class="selected-item" ng-if="selectedMultiQuestion !== null">
                        <span class="path">{{selectedMultiQuestion.breadcrumbs}}</span>
                        <span class="chosen-item"><i class="dropdown-icon" ng-class="'icon-'+selectedMultiQuestion.type"></i>{{selectedMultiQuestion.title}}</span>
                    </span>
                    <span class="dropdown-arrow"></span>
                </button>

                <ul class="dropdown-menu" role="menu">
                    <li role="presentation" ng-class="{'dropdown-header': breadCrumb.isSectionPlaceHolder}" ng-repeat="breadCrumb in activeRoster.multiOption">
                        <span ng-if="breadCrumb.isSectionPlaceHolder">{{breadCrumb.title}}</span>

                        <a ng-if="!breadCrumb.isSectionPlaceHolder"
                           ng-click="selectMultiQuestion(breadCrumb.id)"
                           role="menuitem"
                           tabindex="-1"
                           href="javascript:void(0);">
                            <i class="dropdown-icon" ng-class="'icon-'+breadCrumb.type"></i> {{breadCrumb.title}}
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </script>
</form>
